#!/bin/bash

SRC="main.sg"
DOC="doc"

build() {
  mix compile >/dev/null
  mix run -e "Signo.eval_file!(\"$SRC\")"
}

check() {
  mix check --no-retry
}

docs() {
  mix docs && open $DOC/index.html
}

repl() {
  mix compile >/dev/null
  mix run -e "Signo.repl()"
}

# Temporary

publish() {
  mix docs
  trap p:post_publish EXIT
  mv $DOC signo
  scp -r signo du11:public_ftp/
  p:post_publish
}

p:post_publish() {
  rm -rf signo
}